<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>===============</title>
    <link rel="stylesheet" href="./css/Stylist.css">
</head>

<body>
    <!-- STICKY HEADER -->
    <header class="sticky-header">
        <div class="header-content">
            <div class="header-left">
                <div class="menu-btn" onclick="toggleSidebar()" aria-label="Toggle menu" title="Toggle menu">‚ò∞</div>
                <div id="theme-toggle" class="theme-toggle" aria-label="Toggle theme" title="Toggle theme">‚òæ</div>
            </div>

            <div class="header-center">
                <nav>
                    <ul class="ul-nav">
                        <li class="li-nav"><a href="Home.html">Home</a></li>
                        <li class="li-nav"><a href="Profile.html">Profile</a></li>
                        <li class="li-nav"><a href="Projects.html">Project</a></li>
                        <li class="li-nav"><a href="Media.html">Media</a></li>
                        <li class="li-nav"><a href="Contact.html">Contact</a></li>
                    </ul>
                </nav>
            </div>

            <div class="header-right" id="signin-area"></div>
        </div>
    </header>

    <!-- SIDEBAR -->
    <div id="sidebar" class="sidebar" aria-hidden="true">
        <div class="sidebar-content">
            <div class="profile-container">
                <img src="./assets/img/PROFILE.jpg" alt="My Profile" />
            </div>
            <div class="info-media-wrapper">
                <div class="Konten-sidebar">
                    <h3>Informasi Tambahan</h3>
                    <ul>
                        <li>üìÖ Tanggal Update: <b>03 January 2026</b></li>
                        <li>üåê Status: <span id="login-status">Checking...</span></li>
                        <li>‚ö° Motto: "Kode adalah senjata, logika adalah tameng."</li>
                        <li>üí¨ Pesan Dari Admin: Jangan berhenti di error pertama.</li>
                    </ul>
                </div>
            </div>
        </div>

        <a href="Profile.html" class="bottom-link">About</a>
    </div>

    <!-- LOADING OVERLAY -->
    <div class="loading-overlay" id="loading-overlay">
        <div class="loading-spinner"></div>
    </div>

    <!-- MAIN CONTENT -->
    <main>
        <div class="container" role="main">
            <!-- Section Header -->
            <h2 class="section-title">Karya & Project</h2>
            <p class="section-desc">
                Kumpulan karya dan projek yang telah saya kerjakan dengan passion dan dedikasi.
            </p>

            <!-- FILTER BUTTONS -->
            <div class="filter-buttons" role="tablist" aria-label="Filter karya">
                <button class="filter-btn active" data-filter="all" tabindex="0">‚ú® Semua</button>
                <button class="filter-btn" data-filter="web" tabindex="0">üåê Web Development</button>
                <button class="filter-btn" data-filter="Robotika" tabindex="0">ü§ñ Robotika</button>
                <button class="filter-btn" data-filter="Game" tabindex="0">üéÆ Mini Game</button>
                <button class="filter-btn" data-filter="other" tabindex="0">üé® Lainnya</button>
            </div>

            <!-- KARYA GRID -->
            <div class="karya-grid" id="karya-grid">

                <!-- Item 1: Arduino Projects -->
                <div class="karya-item" data-category="Robotika" data-file="arduino-projects.zip" tabindex="0">
                    <div class="karya-img-container">
                        <img src="./assets/img/Screenshot (136).png" alt="Arduino Projects" class="karya-img">
                    </div>
                    <div class="karya-info">
                        <div>
                            <h3 class="karya-item-title">Arduino Projects</h3>
                            <p class="karya-item-desc">Kumpulan Project Arduino untuk Pemula dengan berbagai sensor dan aktuator</p>
                        </div>
                        <div class="karya-tags" aria-label="Tags">
                            <span class="karya-tag">Robotika</span>
                            <span class="karya-tag">Arduino</span>
                            <span class="karya-tag">Arduino IDE</span>
                        </div>
                        <div class="karya-actions">
                            <button class="btn-view" onclick="viewProject(this)">
                                <span class="btn-icon">üëÅÔ∏è</span>
                                <span class="btn-text">Lihat</span>
                            </button>
                            <button class="btn-download" onclick="downloadFile(this)" data-file="./assets/dokument/PDF/Arduino Projects.pdf">
                                <span class="btn-icon">‚¨áÔ∏è</span>
                                <span class="btn-text">Download</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Item 2: ESP32 -->
                <div class="karya-item" data-category="Robotika" data-file="esp32-webserver.zip" tabindex="0">
                    <div class="karya-img-container">
                        <img src="./assets/img/Screenshot (138).png" alt="ESP32 Web Server" class="karya-img">
                    </div>
                    <div class="karya-info">
                        <div>
                            <h3 class="karya-item-title">ESP32 Web Server</h3>
                            <p class="karya-item-desc">ESP32 Web Server with Arduino IDE untuk Pemula - IoT Project</p>
                        </div>
                        <div class="karya-tags" aria-label="Tags">
                            <span class="karya-tag">Robotika</span>
                            <span class="karya-tag">ESP32</span>
                            <span class="karya-tag">Arduino IDE</span>
                        </div>
                        <div class="karya-actions">
                            <button class="btn-view" onclick="viewProject(this)">
                                <span class="btn-icon">üëÅÔ∏è</span>
                                <span class="btn-text">Lihat</span>
                            </button>
                            <button class="btn-download" onclick="downloadFile(this)" data-file="./assets/dokument/PDF/ESP32_Web_Server_with_Arduino_IDE.pdf">
                                <span class="btn-icon">‚¨áÔ∏è</span>
                                <span class="btn-text">Download</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Item 3: ESP8266 -->
                <div class="karya-item" data-category="Robotika" data-file="esp8266-webserver.zip" tabindex="0">
                    <div class="karya-img-container">
                        <img src="./assets/img/Screenshot (137).png" alt="ESP8266 Web Server" class="karya-img">
                    </div>
                    <div class="karya-info">
                        <div>
                            <h3 class="karya-item-title">ESP8266 Web Server</h3>
                            <p class="karya-item-desc">ESP8266 Web Server with Arduino IDE untuk Pemula - WiFi Module</p>
                        </div>
                        <div class="karya-tags" aria-label="Tags">
                            <span class="karya-tag">Robotika</span>
                            <span class="karya-tag">ESP8266</span>
                            <span class="karya-tag">Arduino IDE</span>
                        </div>
                        <div class="karya-actions">
                            <button class="btn-view" onclick="viewProject(this)">
                                <span class="btn-icon">üëÅÔ∏è</span>
                                <span class="btn-text">Lihat</span>
                            </button>
                            <button class="btn-download" onclick="downloadFile(this)" data-file="./assets/dokument/PDF/ESP8266_Web_Server_with_Arduino_IDE.pdf">
                                <span class="btn-icon">‚¨áÔ∏è</span>
                                <span class="btn-text">Download</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Item 4: Function & Array -->
                <div class="karya-item" data-category="web" data-file="function-array-js.zip" tabindex="0">
                    <div class="karya-img-container">
                        <img src="./assets/img/Screenshot (139).png" alt="Function & Array JavaScript" class="karya-img">
                    </div>
                    <div class="karya-info">
                        <div>
                            <h3 class="karya-item-title">Function & Array</h3>
                            <p class="karya-item-desc">Contoh Pengaplikasian Function dan Array Sederhana dalam JavaScript</p>
                        </div>
                        <div class="karya-tags" aria-label="Tags">
                            <span class="karya-tag">Web Development</span>
                            <span class="karya-tag">JavaScript</span>
                            <span class="karya-tag">HTML</span>
                        </div>
                        <div class="karya-actions">
                            <button class="btn-view" onclick="viewProject(this)">
                                <span class="btn-icon">üëÅÔ∏è</span>
                                <span class="btn-text">Lihat</span>
                            </button>
                            <button class="btn-download" onclick="downloadFile(this)" data-file="./source_kode/Usia.html">
                                <span class="btn-icon">‚¨áÔ∏è</span>
                                <span class="btn-text">Download</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Item 5: Variabel & Operator -->
                <div class="karya-item" data-category="web" data-file="variabel-operator-js.zip" tabindex="0">
                    <div class="karya-img-container">
                        <img src="./assets/img/Screenshot (140).png" alt="Variabel, tipe data, dan Operator" class="karya-img">
                    </div>
                    <div class="karya-info">
                        <div>
                            <h3 class="karya-item-title">Variabel, Tipe Data & Operator</h3>
                            <p class="karya-item-desc">Contoh Pengaplikasian Variabel, tipe data, dan Operator sederhana</p>
                        </div>
                        <div class="karya-tags" aria-label="Tags">
                            <span class="karya-tag">Web Development</span>
                            <span class="karya-tag">JavaScript</span>
                            <span class="karya-tag">HTML</span>
                        </div>
                        <div class="karya-actions">
                            <button class="btn-view" onclick="viewProject(this)">
                                <span class="btn-icon">üëÅÔ∏è</span>
                                <span class="btn-text">Lihat</span>
                            </button>
                            <button class="btn-download" onclick="downloadFile(this)" data-file="./source_kode/Variabel.html">
                                <span class="btn-icon">‚¨áÔ∏è</span>
                                <span class="btn-text">Download</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Item 6: RoboMind -->
                <div class="karya-item" data-category="Game" data-file="robomind-game.zip" tabindex="0">
                    <div class="karya-img-container">
                        <img src="./assets/img/RoboMind.jpg" alt="RoboMind Game" class="karya-img">
                    </div>
                    <div class="karya-info">
                        <div>
                            <h3 class="karya-item-title">RoboMind</h3>
                            <p class="karya-item-desc">Mini Game untuk mengasah logika dan pemrograman</p>
                        </div>
                        <div class="karya-tags" aria-label="Tags">
                            <span class="karya-tag">Mini Game</span>
                            <span class="karya-tag">Robo Mind</span>
                            <span class="karya-tag">C</span>
                        </div>
                        <div class="karya-actions">
                            <button class="btn-view" onclick="viewProject(this)">
                                <span class="btn-icon">üëÅÔ∏è</span>
                                <span class="btn-text">Lihat</span>
                            </button>
                            <button class="btn-download" onclick="downloadFile(this)" data-file="">
                                <span class="btn-icon">‚¨áÔ∏è</span>
                                <span class="btn-text">Download</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Item 7: Gripper Robo -->
                <div class="karya-item" data-category="other" data-file="gripper-robo.zip" tabindex="0">
                    <div class="karya-img-container">
                        <img src="assets/img/Gripp.jpg" alt="Gripper Robo" class="karya-img">
                    </div>
                    <div class="karya-info">
                        <div>
                            <h3 class="karya-item-title">Gripper Robo</h3>
                            <p class="karya-item-desc">Robot untuk mengambil dan memindahkan object dengan presisi</p>
                        </div>
                        <div class="karya-tags" aria-label="Tags">
                            <span class="karya-tag">3D Design</span>
                            <span class="karya-tag">Gripper Robo</span>
                            <span class="karya-tag">Robotics</span>
                        </div>
                        <div class="karya-actions">
                            <button class="btn-view" onclick="viewProject(this)">
                                <span class="btn-icon">üëÅÔ∏è</span>
                                <span class="btn-text">Lihat</span>
                            </button>
                            <button class="btn-download" onclick="downloadFile(this)" data-file="./assets/dokument/PDF/Gripper_Sub_Assembly_Instructions_Build_Drawings.pdf">
                                <span class="btn-icon">‚¨áÔ∏è</span>
                                <span class="btn-text">Download</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
    </main>

    <!-- FOOTER -->
    <footer>
        <p>&copy; 2007 MASTER Z007</p>
    </footer>

    <!-- JAVASCRIPT -->
    <script>
        // ===== SIDEBAR TOGGLE =====
        const sidebar = document.getElementById("sidebar");
        const menuBtn = document.querySelector(".menu-btn");

        function toggleSidebar() {
            const isOpen = sidebar.classList.toggle("open");
            sidebar.setAttribute("aria-hidden", !isOpen);
        }

        // Close sidebar when clicking outside
        document.addEventListener("click", (e) => {
            if (!sidebar.contains(e.target) && !menuBtn.contains(e.target)) {
                sidebar.classList.remove("open");
                sidebar.setAttribute("aria-hidden", "true");
            }
        });

        // Close sidebar on Escape key
        document.addEventListener("keydown", (e) => {
            if (e.key === "Escape") {
                sidebar.classList.remove("open");
                sidebar.setAttribute("aria-hidden", "true");
            }
        });

        // ===== THEME TOGGLE =====
        const themeBtn = document.getElementById("theme-toggle");
        const THEME_KEY = "theme";

        function applyTheme(mode) {
            if (mode === "light") {
                document.body.classList.add("light-mode");
                themeBtn.textContent = "‚òÄ";
            } else {
                document.body.classList.remove("light-mode");
                themeBtn.textContent = "‚òæ";
            }
        }

        // Load saved theme
        const savedMode = localStorage.getItem(THEME_KEY);
        applyTheme(savedMode);

        // Toggle theme
        themeBtn.addEventListener("click", () => {
            themeBtn.classList.add("active");
            setTimeout(() => themeBtn.classList.remove("active"), 420);

            const currentIsLight = document.body.classList.contains("light-mode");
            const newMode = currentIsLight ? "dark" : "light";
            localStorage.setItem(THEME_KEY, newMode);
            applyTheme(newMode);
        });

        // ===== LOGIN SYSTEM =====
        const AUTH_KEY = 'userAuth';
        const SESSION_KEY = 'sessionAuth';

        function getLoginData() {
            if (window.loginState) {
                return window.loginState;
            }

            const sessionData = sessionStorage.getItem(SESSION_KEY);
            if (sessionData) {
                try {
                    return JSON.parse(sessionData);
                } catch (e) {
                    console.error('Error parsing session data:', e);
                }
            }

            const persistentData = localStorage.getItem(AUTH_KEY);
            if (persistentData) {
                try {
                    return JSON.parse(persistentData);
                } catch (e) {
                    console.error('Error parsing persistent data:', e);
                }
            }

            return null;
        }

        function saveLoginData(data, rememberMe = false) {
            sessionStorage.setItem(SESSION_KEY, JSON.stringify(data));

            if (rememberMe && data.isLoggedIn) {
                localStorage.setItem(AUTH_KEY, JSON.stringify(data));
            } else {
                localStorage.removeItem(AUTH_KEY);
            }
        }

        function clearLoginData() {
            sessionStorage.removeItem(SESSION_KEY);
            localStorage.removeItem(AUTH_KEY);
            window.loginState = null;
        }

        window.addEventListener('beforeunload', function() {
            const loginData = getLoginData();
            const hasPersistentLogin = localStorage.getItem(AUTH_KEY);

            if (!hasPersistentLogin && loginData && loginData.isLoggedIn) {
                sessionStorage.removeItem(SESSION_KEY);
            }
        });

        (function() {
            let loginData = getLoginData();
            let isLoggedIn = loginData ? loginData.isLoggedIn : false;
            let username = loginData ? loginData.username : "Guest";
            let avatarURL = loginData ? loginData.avatarURL : "profile.jpg";
            let rememberMe = loginData ? loginData.rememberMe : false;

            const signinArea = document.getElementById("signin-area");
            const loginStatus = document.getElementById("login-status");

            function updateLoginStatus() {
                if (loginStatus) {
                    if (isLoggedIn) {
                        loginStatus.innerHTML = '<b style="color: #00ff00;">Online (Logged In)</b>';
                    } else {
                        loginStatus.innerHTML = '<b style="color: #ff9800;">Guest Mode</b>';
                    }
                }
            }

            function renderSignInMenu() {
                if (!isLoggedIn) {
                    signinArea.innerHTML = `
                        <div class="li-nav">
                            <a href="index.html">üîê Sign In</a>
                        </div>
                    `;
                } else {
                    signinArea.innerHTML = `
                        <div class="account-box" id="account-box">
                            <img src="./assets/img/PROFILE.jpg" alt="User Avatar" 
                                 onerror="this.src='data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27100%27 height=%27100%27%3E%3Crect fill=%27%233b82f6%27 width=%27100%27 height=%27100%27/%3E%3Ctext x=%2750%25%27 y=%2750%25%27 dominant-baseline=%27middle%27 text-anchor=%27middle%27 font-size=%2740%27 fill=%27white%27%3E${username.charAt(0)}%3C/text%3E%3C/svg%3E'">
                            <span>MASTER Z007</span>
                            <div class="dropdown-menu" id="dropdown-menu">
                                <a href="Profile.html">üë§ My Profile</a>
                                <a href="#" id="logout-btn">üö™ Logout</a>
                            </div>
                        </div>
                    `;

                    const accountBox = document.getElementById("account-box");

                    accountBox.addEventListener("click", function(e) {
                        e.stopPropagation();
                        accountBox.classList.toggle("dropdown-open");
                    });

                    document.addEventListener("click", function(e) {
                        if (!accountBox.contains(e.target)) {
                            accountBox.classList.remove("dropdown-open");
                        }
                    });

                    document.getElementById("logout-btn").addEventListener("click", function(e) {
                        e.preventDefault();

                        clearLoginData();

                        isLoggedIn = false;
                        username = "Guest";

                        accountBox.style.transform = 'scale(0.8)';
                        accountBox.style.opacity = '0';

                        setTimeout(() => {
                            renderSignInMenu();
                            updateLoginStatus();
                            showNotification('‚úÖ Logout berhasil! Anda sekarang dalam Guest Mode.');
                        }, 300);
                    });
                }

                updateLoginStatus();
            }

            function showNotification(message) {
                const notification = document.createElement('div');
                notification.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: rgba(59, 130, 246, 0.95);
                    color: white;
                    padding: 15px 25px;
                    border-radius: 10px;
                    box-shadow: 0 5px 20px rgba(59, 130, 246, 0.5);
                    z-index: 10000;
                    animation: slideIn 0.3s ease;
                    font-weight: bold;
                `;
                notification.textContent = message;
                document.body.appendChild(notification);

                setTimeout(() => {
                    notification.style.animation = 'slideOut 0.3s ease';
                    setTimeout(() => notification.remove(), 300);
                }, 3000);
            }

            if (window.loginState) {
                const rememberMe = window.loginState.rememberMe || false;
                saveLoginData(window.loginState, rememberMe);
            }

            renderSignInMenu();

            if (isLoggedIn && window.loginState) {
                setTimeout(() => {
                    showNotification(`üéâ Selamat datang, ${username}!`);
                }, 500);
            }
        })();

        // ===== FILTER BUTTONS =====
        const filterButtons = document.querySelectorAll('.filter-btn');
        const karyaItems = document.querySelectorAll('.karya-item');

        filterButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                filterButtons.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');

                const filter = btn.getAttribute('data-filter');

                karyaItems.forEach((item, index) => {
                    if (filter === 'all' || item.getAttribute('data-category') === filter) {
                        item.style.display = 'flex';
                        setTimeout(() => {
                            item.style.opacity = '1';
                            item.style.transform = 'translateY(0)';
                        }, index * 50);
                    } else {
                        item.style.opacity = '0';
                        item.style.transform = 'translateY(20px)';
                        setTimeout(() => item.style.display = 'none', 300);
                    }
                });
            });

            btn.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    btn.click();
                }
            });
        });

        // ===== VIEW PROJECT - LIGHTBOX YANG DIPERBAIKI =====
        function viewProject(button) {
            const item = button.closest('.karya-item');
            if (!item) {
                console.error('Parent element .karya-item not found');
                return;
            }

            const img = item.querySelector('.karya-img');
            const titleElement = item.querySelector('.karya-item-title');
            const descElement = item.querySelector('.karya-item-desc');

            if (!img || !titleElement) {
                console.error('Required elements not found');
                return;
            }

            const title = titleElement.textContent;
            const description = descElement ? descElement.textContent : '';
            const imgSrc = img.src;

            // Buat lightbox overlay
            const lightbox = document.createElement('div');
            lightbox.className = 'custom-lightbox';
            lightbox.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.95);
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                z-index: 9999;
                opacity: 0;
                transition: opacity 0.3s ease;
                cursor: pointer;
            `;

            // Container untuk konten
            const contentContainer = document.createElement('div');
            contentContainer.style.cssText = `
                max-width: 90%;
                max-height: 90vh;
                display: flex;
                flex-direction: column;
                align-items: center;
                cursor: default;
            `;

            // Buat elemen gambar
            const lightboxImg = document.createElement('img');
            lightboxImg.src = imgSrc;
            lightboxImg.alt = title;
            lightboxImg.style.cssText = `
                max-width: 100%;
                max-height: 70vh;
                object-fit: contain;
                border-radius: 12px;
                box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
                margin-bottom: 20px;
            `;

            // Buat container info
            const infoContainer = document.createElement('div');
            infoContainer.style.cssText = `
                background: rgba(255, 255, 255, 0.1);
                backdrop-filter: blur(10px);
                padding: 20px 30px;
                border-radius: 12px;
                max-width: 600px;
                text-align: center;
            `;

            // Buat elemen judul
            const lightboxTitle = document.createElement('h3');
            lightboxTitle.textContent = title;
            lightboxTitle.style.cssText = `
                color: white;
                font-size: 24px;
                margin: 0 0 10px 0;
                font-weight: 600;
            `;

            // Buat elemen deskripsi
            const lightboxDesc = document.createElement('p');
            lightboxDesc.textContent = description;
            lightboxDesc.style.cssText = `
                color: rgba(255, 255, 255, 0.8);
                font-size: 14px;
                margin: 0;
                line-height: 1.6;
            `;

            // Buat tombol close
            const closeBtn = document.createElement('button');
            closeBtn.innerHTML = '√ó';
            closeBtn.setAttribute('aria-label', 'Close');
            closeBtn.style.cssText = `
                position: absolute;
                top: 20px;
                right: 30px;
                color: white;
                font-size: 50px;
                background: rgba(255, 255, 255, 0.1);
                backdrop-filter: blur(10px);
                border: 2px solid rgba(255, 255, 255, 0.2);
                width: 50px;
                height: 50px;
                border-radius: 50%;
                cursor: pointer;
                transition: all 0.3s ease;
                display: flex;
                align-items: center;
                justify-content: center;
                line-height: 1;
                padding: 0;
            `;

            closeBtn.addEventListener('mouseenter', () => {
                closeBtn.style.background = 'rgba(255, 255, 255, 0.2)';
                closeBtn.style.transform = 'rotate(90deg) scale(1.1)';
            });

            closeBtn.addEventListener('mouseleave', () => {
                closeBtn.style.background = 'rgba(255, 255, 255, 0.1)';
                closeBtn.style.transform = 'rotate(0deg) scale(1)';
            });

            // Fungsi untuk menutup lightbox
            const closeLightbox = () => {
                lightbox.style.opacity = '0';
                setTimeout(() => lightbox.remove(), 300);
                document.body.style.overflow = '';
            };

            // Event listeners
            closeBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                closeLightbox();
            });

            lightbox.addEventListener('click', closeLightbox);

            contentContainer.addEventListener('click', (e) => e.stopPropagation());

            // Tutup dengan tombol ESC
            const escHandler = (e) => {
                if (e.key === 'Escape') {
                    closeLightbox();
                    document.removeEventListener('keydown', escHandler);
                }
            };
            document.addEventListener('keydown', escHandler);

            // Susun elemen
            infoContainer.appendChild(lightboxTitle);
            infoContainer.appendChild(lightboxDesc);
            contentContainer.appendChild(lightboxImg);
            contentContainer.appendChild(infoContainer);
            lightbox.appendChild(closeBtn);
            lightbox.appendChild(contentContainer);
            document.body.appendChild(lightbox);

            // Prevent body scroll
            document.body.style.overflow = 'hidden';

            // Trigger animasi fade in
            setTimeout(() => lightbox.style.opacity = '1', 10);
        }

        // ===== DOWNLOAD FILE =====
        function downloadFile(button) {
            const filename = button.getAttribute('data-file');
            const item = button.closest('.karya-item');
            const title = item.querySelector('.karya-item-title').textContent;

            if (!filename) {
                alert('File tidak ditemukan!');
                return;
            }

            button.classList.add('downloading');
            const originalText = button.querySelector('.btn-text').textContent;
            button.querySelector('.btn-text').textContent = 'Downloading...';

            setTimeout(() => {
                const link = document.createElement('a');
                link.href = filename;
                link.download = filename;
                link.style.display = 'none';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);

                showNotification(`‚úÖ ${title} berhasil diunduh!`, 'success');

                button.classList.remove('downloading');
                button.querySelector('.btn-text').textContent = originalText;

                button.style.animation = 'downloadSuccess 0.6s ease-out';
                setTimeout(() => button.style.animation = '', 600);
            }, 300);
        }

        // ===== NOTIFICATION SYSTEM =====
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            const bgColor = type === 'success' ?
                'linear-gradient(135deg, #667eea, #764ba2)' :
                'linear-gradient(135deg, #f87171, #dc2626)';

            Object.assign(notification.style, {
                position: 'fixed',
                top: '20px',
                right: '20px',
                background: bgColor,
                color: 'white',
                padding: '16px 24px',
                borderRadius: '12px',
                boxShadow: '0 10px 30px rgba(0, 0, 0, 0.3)',
                zIndex: '10001',
                fontWeight: '600',
                animation: 'slideIn 0.3s ease-out'
            });

            notification.textContent = message;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease-out';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // ===== IMAGE ERROR HANDLING =====
        document.querySelectorAll('.karya-img').forEach(img => {
            img.addEventListener('error', () => {
                img.src = 'https://via.placeholder.com/400x300?text=Image+Not+Found';
                img.alt = 'Image not available';
            });
        });

        // ===== SMOOTH SCROLL =====
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // ===== SCROLL ANIMATIONS =====
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, observerOptions);

        karyaItems.forEach(item => {
            observer.observe(item);
        });

        // Add animations
        const styleSheet = document.createElement('style');
        styleSheet.textContent = `
            @keyframes slideIn {
                from { transform: translateX(400px); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(400px); opacity: 0; }
            }
            @keyframes downloadSuccess {
                0% { transform: scale(1); }
                50% { transform: scale(1.1); }
                100% { transform: scale(1); }
            }
        `;
        document.head.appendChild(styleSheet);
    </script>

</body>


</html>
